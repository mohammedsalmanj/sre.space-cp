<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SRE-Space | Orbital Control</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <script>
        // Block 1: Multi-Cloud Awareness
        window.NEXT_PUBLIC_API_URL = window.location.origin.includes("localhost")
            ? "http://localhost:8001"
            : "https://sre-space-cp.onrender.com";
    </script>
</head>

<body>
    <div class="glow-bg"></div>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <span class="logo-icon">üì°</span>
                <span class="logo-text">SRE.SPACE</span>
            </div>
            <nav class="nav-menu">
                <nav class="nav-menu">
                    <div id="nav-dashboard" class="nav-item active" onclick="switchTab('dashboard')">üìä Dashboard</div>
                    <div id="nav-traces" class="nav-item" onclick="switchTab('traces')">üì° Agent Traces</div>
                    <div id="nav-postmortems" class="nav-item" onclick="switchTab('postmortems')">üìÇ Post-Mortems</div>
                    <div id="nav-chaos" class="nav-item" onclick="switchTab('chaos')">üß™ Chaos Lab</div>
                    <div id="nav-config" class="nav-item" onclick="switchTab('config')">‚öôÔ∏è Config</div>
                </nav>
                <div class="agent-status-card">
                    <h3>Agent Health</h3>
                    <div class="agent-list">
                        <div class="agent-status">
                            <span id="health-scout" class="status-dot ONLINE"></span> Scout <span
                                style="margin-left: auto; font-size: 10px; color: var(--success);">ONLINE</span>
                        </div>
                        <div class="agent-status">
                            <span id="health-brain" class="status-dot ONLINE"></span> Brain <span
                                style="margin-left: auto; font-size: 10px; color: var(--success);">READY</span>
                        </div>
                        <div class="agent-status">
                            <span id="health-fixer" class="status-dot IDLE"></span> Fixer <span
                                style="margin-left: auto; font-size: 10px; color: var(--warning);">IDLE</span>
                        </div>
                    </div>
                </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header Panel -->
            <header class="glass-panel main-header">
                <div class="header-title">
                    <h1 id="page-title">Orbital Control Plane</h1>
                    <div class="subtitle">
                        Autonomous Reliability Engineering v5.0
                        <span id="env-badge" class="deployment-badge"
                            style="background: rgba(56, 189, 248, 0.1); color: var(--accent);">SYNCING...</span>
                    </div>
                </div>
                <div class="header-actions">
                    <div class="live-indicator">
                        <span id="live-dot" class="live-dot"></span>
                        <span id="live-text">LIVE ENGINE FEED</span>
                    </div>
                </div>
            </header>

            <!-- Metrics Grid -->
            <section id="metrics-bar" class="metrics-grid">
                <div class="glass-panel metric-card">
                    <span class="metric-label">Mean Time to Fix</span>
                    <span id="metric-mttr" class="metric-value">4.2m</span>
                </div>
                <div class="glass-panel metric-card">
                    <span class="metric-label">Auto-Resilience</span>
                    <span id="metric-resilience" class="metric-value">99.8%</span>
                </div>
                <div class="glass-panel metric-card">
                    <span class="metric-label">Active Git-PRs</span>
                    <span id="active-prs" class="metric-value">0</span>
                </div>
            </section>

            <!-- Tab: Dashboard -->
            <div id="tab-dashboard" class="tab-panel">
                <div class="dashboard-grid">
                    <!-- Log Stream -->
                    <section class="glass-panel logs-container">
                        <div class="feed-header">
                            <h2>Agentic OODA Loop</h2>
                            <button onclick="clearLogs()"
                                style="background: transparent; border: 1px solid var(--glass-border); color: var(--text-secondary); padding: 4px 12px; border-radius: 8px; font-size: 11px; cursor: pointer;">Clear
                                Logs</button>
                        </div>
                        <div class="logs-feed" id="logs-feed">
                            <div class="log-entry">Awaiting sensory intake from backend sensors...</div>
                        </div>
                    </section>

                    <!-- Git Veracity Feed -->
                    <section class="glass-panel veracity-container">
                        <div class="feed-header">
                            <h2>GitOps Veracity</h2>
                            <span style="font-size: 11px; color: var(--text-secondary);">Last sync: <span
                                    id="last-sync">Just now</span></span>
                        </div>
                        <div class="incident-list" id="incident-list">
                            <div
                                style="padding: 20px; text-align: center; color: var(--text-secondary); font-size: 13px;">
                                Polling GitHub repositories...</div>
                        </div>
                    </section>
                </div>
            </div>

            <!-- Tab: Chaos Lab -->
            <div id="tab-chaos" class="tab-panel hidden">
                <div class="glass-panel" style="padding: 40px; text-align: center;">
                    <div style="font-size: 40px; margin-bottom: 20px;">üî•</div>
                    <h2 style="font-size: 24px; font-weight: 800; margin-bottom: 10px;">Synthetic Failure Injection</h2>
                    <p style="color: var(--text-secondary); max-width: 500px; margin: 0 auto 30px;">
                        Trigger controlled chaos within the Policy Service to observe the autonomous SRE loop's
                        remediation capabilities.
                    </p>
                    <div class="chaos-controls"
                        style="display: grid; grid-template-cols: 1fr 1fr; gap: 20px; max-width: 600px; margin: 0 auto;">
                        <button onclick="triggerChaos('db_pool_exhaustion')" class="glass-panel"
                            style="padding: 20px; cursor: pointer; border: 1px solid rgba(244, 63, 94, 0.3); background: rgba(244, 63, 94, 0.05); color: #f43f5e; font-weight: 700;">
                            INJECT: DB POOL EXHAUSTION
                        </button>
                        <button onclick="triggerChaos('latency_spike')" class="glass-panel"
                            style="padding: 20px; cursor: pointer; border: 1px solid rgba(245, 158, 11, 0.3); background: rgba(245, 158, 11, 0.05); color: #f59e0b; font-weight: 700;">
                            INJECT: LATENCY SPIKE (5s)
                        </button>
                    </div>
                </div>
            </div>

            <!-- Tab: Placeholder (Traces, PostMortems, Config) -->
            <div id="tab-placeholder" class="tab-panel hidden">
                <div class="glass-panel" style="padding: 100px; text-align: center; color: var(--text-secondary);">
                    <div style="font-size: 40px; margin-bottom: 20px;">üèóÔ∏è</div>
                    <h2 id="placeholder-title">Under Construction</h2>
                    <p>Live telemetry stream provides the primary veracity feed for this tier.</p>
                </div>
            </div>
        </main>
    </div>

    <script src="/main.js"></script>
</body>

</html>